# 短连接服务
> 2019年10月11日
- 搭建基本架构第一版
- [x] 增加测试页面与二维码
- [x] 修改缓存问题
- [x] 设置过期时间

> 2019年10月22日
- 搭建基本架构第一版
- 增加测试页面与二维码
- 增加数据库存放Ip访问情况,以便统计uv/pv
- [x] 修改缓存问题
- [x] 设置过期时间

> 2019年11月13日
- 搭建基本架构第一版
- 增加测试页面与二维码
- 增加数据库存放Ip访问情况,以便统计uv/pv
- 修改页面
- [x] 修改缓存问题
- [x] 设置过期时间

# 描述
[参考文章](https://mp.weixin.qq.com/s/jHUzr3y0cFD0REmT8SxAhA)
### 为什么要使用缓存
- 链接变短，在对内容长度有限制的平台发文，可编辑的文字就变多了
- 生成的二维码比较容易被识别

### 原理
- 301，代表 永久重定向，也就是说第一次请求拿到长链接后，下次浏览器再去请求短链的话，不会向短网址服务器请求了，而是直接从浏览器的缓存里拿，这样在 server 层面就无法获取到短网址的点击数了，如果这个链接刚好是某个活动的链接，也就无法分析此活动的效果。所以我们一般不采用 301。
- 302，代表 临时重定向，也就是说每次去请求短链都会去请求短网址服务器（除非响应中用 Cache-Control 或 Expired 暗示浏览器缓存）,这样就便于 server 统计点击数，所以虽然用 302 会给 server 增加一点压力，但在数据异常重要的今天，这点代码是值得的，所以推荐使用 302！





